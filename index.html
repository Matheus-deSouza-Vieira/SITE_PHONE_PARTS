<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PHONE PARTS | Interface de Sistema</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Rajdhani:wght@500;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        mono: ['JetBrains Mono', 'monospace'],
                        display: ['Rajdhani', 'sans-serif'],
                    },
                    colors: {
                        neon: '#FF5E00',
                        dark: '#0a0a0a',
                        panel: '#121212',
                        border: '#404040'
                    },
                    animation: {
                        'blink': 'blink 2s infinite',
                        'spin-slow': 'spin 10s linear infinite',
                        'spin-reverse': 'spin 15s linear infinite reverse',
                        'ping-slow': 'ping 3s cubic-bezier(0, 0, 0.2, 1) infinite',
                        'warp': 'warp 0.3s ease-in-out',
                    },
                    keyframes: {
                        blink: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.5' },
                        },
                        warp: {
                            '0%': { opacity: '1', transform: 'scale(1)', filter: 'hue-rotate(0deg)' },
                            '50%': { opacity: '0.8', transform: 'scale(0.98)', filter: 'hue-rotate(90deg) blur(2px)' },
                            '100%': { opacity: '1', transform: 'scale(1)', filter: 'hue-rotate(0deg)' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0a0a0a; overflow: hidden; }

        @media (max-width: 768px) {
            body { position: fixed; width: 100%; height: 100%; }
            .content-area { 
                flex: 1; 
                overflow-y: auto; 
                padding-bottom: 250px !important; 
                padding-top: 80px !important;
                -webkit-overflow-scrolling: touch;
            }
            .nav-bar {
                position: fixed; bottom: 0; width: 100%; height: 70px; z-index: 50;
                flex-direction: row !important; border-right: none !important; border-top: 1px solid #333;
                padding-bottom: env(safe-area-inset-bottom);
                background-color: #0a0a0a;
            }
            .nav-logo { display: none; }
        }

        .bg-grid {
            background-image: linear-gradient(#1f1f1f 1px, transparent 1px),
            linear-gradient(90deg, #1f1f1f 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .cyber-scroll::-webkit-scrollbar { width: 6px; }
        .cyber-scroll::-webkit-scrollbar-track { background: #121212; }
        .cyber-scroll::-webkit-scrollbar-thumb { background: #FF5E00; border-radius: 3px; }

        .tab-btn.active {
            background-color: rgba(255, 94, 0, 0.1);
            border-right: 4px solid #FF5E00;
            color: #FF5E00;
        }
        .tab-btn.active i { color: #FF5E00; }
        
        @media (max-width: 768px) {
            .tab-btn.active { border-right: none; border-top: 2px solid #FF5E00; }
        }
        
        .hud-ring { border: 1px dashed rgba(255, 94, 0, 0.3); border-radius: 50%; }
        .hud-ring-2 { border: 2px solid transparent; border-top: 2px solid #FF5E00; border-bottom: 2px solid #FF5E00; border-radius: 50%; }
        .cyber-transition { animation: warp 0.3s ease-in-out; }

        /* CARROSSEL FIXED STYLE */
        .carousel-img {
            transition: opacity 1s ease-in-out, transform 4s ease-in-out;
            opacity: 0;
            z-index: 0;
            transform: scale(1);
        }
        .carousel-img.active {
            opacity: 1;
            z-index: 10;
            transform: scale(1.05);
        }

        .loc-btn {
            border: 1px solid #404040; color: #666; padding: 8px 16px;
            font-family: 'Rajdhani', sans-serif; font-weight: bold; text-transform: uppercase;
            transition: all 0.3s; font-size: 0.8rem;
        }
        .loc-btn:hover { border-color: #FF5E00; color: white; }
        .loc-btn.active { background-color: #FF5E00; color: black; border-color: #FF5E00; box-shadow: 0 0 15px rgba(255, 94, 0, 0.3); }

        .cyber-input {
            background-color: #0a0a0a; border: 1px solid #333; color: #e5e5e5; padding: 12px; width: 100%;
            font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; outline: none; transition: border-color 0.3s;
        }
        .cyber-input:focus { border-color: #FF5E00; box-shadow: 0 0 8px rgba(255, 94, 0, 0.2); }
        .cyber-label { display: block; color: #FF5E00; font-size: 0.7rem; font-weight: bold; text-transform: uppercase; margin-bottom: 4px; letter-spacing: 0.1em; }
    </style>
</head>
<body class="text-gray-100 font-mono bg-grid h-screen w-screen flex flex-col md:flex-row main-layout">

    <header class="md:hidden fixed top-0 w-full z-50 bg-black/60 backdrop-blur-md border-b border-white/5 px-4 py-3 flex justify-between items-center transition-all duration-300">
        <div class="flex items-center gap-3">
            <img src="fotos/logo.png" alt="Logo" class="w-10 h-10 object-contain drop-shadow-[0_0_8px_rgba(255,94,0,0.6)]">
            <h1 class="font-display text-xl font-bold text-white tracking-wider">PHONE PARTS</h1>
        </div>
        <a href="https://wa.me/554830252210" class="flex items-center gap-2 bg-neon/90 hover:bg-neon text-black px-4 py-2 rounded-full shadow-lg shadow-neon/20 transition-transform active:scale-95">
            <i data-lucide="message-circle" class="w-4 h-4"></i>
            <span class="text-xs font-bold uppercase">WhatsApp</span>
        </a>
    </header>

    <nav class="nav-bar w-full md:w-64 bg-dark border-r border-border flex flex-row md:flex-col justify-between md:h-full shrink-0 z-40">
        <div class="nav-logo hidden md:flex flex-col p-6 border-b border-border bg-panel">
            <div class="flex items-center gap-4">
                <img src="fotos/logo.png" alt="PPhone Parts Logo" class="w-16 h-auto object-contain drop-shadow-[0_0_10px_rgba(255,94,0,0.3)]">
                <div>
                    <h1 class="font-display text-2xl font-bold text-white tracking-wider leading-none">PHONE</h1>
                    <h1 class="font-display text-2xl font-bold text-neon tracking-wider leading-none">PARTS</h1>
                </div>
            </div>
            <p class="text-[10px] text-gray-500 mt-4 tracking-[0.3em] font-bold text-center border-t border-gray-800 pt-2 w-full">Assist√™ncia T√©cnicas</p>
        </div>

        <div class="flex flex-1 flex-row md:flex-col justify-around md:justify-start md:p-0 bg-dark overflow-x-auto md:overflow-visible">
            <button onclick="switchTab('home')" class="tab-btn active flex flex-col md:flex-row items-center md:px-6 py-3 gap-3 hover:bg-white/5 transition-all group w-full text-center md:text-left border-b md:border-b-0 border-gray-800/50">
                <i data-lucide="activity" class="w-5 h-5 text-gray-400 group-hover:text-neon transition-colors"></i>
                <span class="text-[10px] md:text-sm font-bold uppercase tracking-wide">In√≠cio</span>
            </button>
            <button onclick="switchTab('orcamento')" class="tab-btn flex flex-col md:flex-row items-center md:px-6 py-3 gap-3 hover:bg-white/5 transition-all group w-full text-center md:text-left border-b md:border-b-0 border-gray-800/50">
                <i data-lucide="file-text" class="w-5 h-5 text-gray-400 group-hover:text-neon transition-colors"></i>
                <span class="text-[10px] md:text-sm font-bold uppercase tracking-wide">Or√ßamento</span>
            </button>
            <button onclick="switchTab('celular')" class="tab-btn flex flex-col md:flex-row items-center md:px-6 py-3 gap-3 hover:bg-white/5 transition-all group w-full text-center md:text-left border-b md:border-b-0 border-gray-800/50">
                <i data-lucide="smartphone" class="w-5 h-5 text-gray-400 group-hover:text-neon transition-colors"></i>
                <span class="text-[10px] md:text-sm font-bold uppercase tracking-wide">Celulares</span>
            </button>
            <button onclick="switchTab('notebook')" class="tab-btn flex flex-col md:flex-row items-center md:px-6 py-3 gap-3 hover:bg-white/5 transition-all group w-full text-center md:text-left border-b md:border-b-0 border-gray-800/50">
                <i data-lucide="monitor" class="w-5 h-5 text-gray-400 group-hover:text-neon transition-colors"></i>
                <span class="text-[10px] md:text-sm font-bold uppercase tracking-wide">Notebooks</span>
            </button>
            <button onclick="switchTab('vendas')" class="tab-btn flex flex-col md:flex-row items-center md:px-6 py-3 gap-3 hover:bg-white/5 transition-all group w-full text-center md:text-left border-b md:border-b-0 border-gray-800/50">
                <i data-lucide="shopping-cart" class="w-5 h-5 text-gray-400 group-hover:text-neon transition-colors"></i>
                <span class="text-[10px] md:text-sm font-bold uppercase tracking-wide">Vendas</span>
            </button>
            <button onclick="switchTab('location')" class="tab-btn flex flex-col md:flex-row items-center md:px-6 py-3 gap-3 hover:bg-white/5 transition-all group w-full text-center md:text-left">
                <i data-lucide="map" class="w-5 h-5 text-gray-400 group-hover:text-neon transition-colors"></i>
                <span class="text-[10px] md:text-sm font-bold uppercase tracking-wide">Local GPS</span>
            </button>
        </div>

        <div class="hidden md:block p-6 border-t border-border bg-panel">
            <div class="flex justify-between items-center mb-4 border border-gray-800 p-2 bg-black/50 rounded">
                <span class="text-[9px] text-gray-500 font-mono">SYS.ACCESS_ID:</span>
                <span id="visit-counter-desktop" class="text-xs text-neon font-mono font-bold tracking-widest">--.--</span>
            </div>
            <a href="https://wa.me/554830252210" target="_blank" class="w-full flex items-center justify-center gap-2 bg-neon hover:bg-white hover:text-black text-black font-bold py-3 rounded uppercase text-xs transition-all shadow-lg shadow-neon/20 hover:shadow-neon/40">
                <i data-lucide="message-circle" class="w-4 h-4"></i> FALE CONOSCO
            </a>
        </div>
    </nav>

    <main id="mainDisplay" class="flex-1 overflow-hidden flex flex-col">
        <div class="content-area cyber-scroll overflow-y-auto flex-1 p-6 md:p-12 bg-grid">

            <!-- 1. HOME -->
            <section id="home" class="tab-content space-y-8">
                <canvas id="circuitCanvas" class="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none"></canvas>
                <div class="relative z-10 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center mb-12">
                    <div class="relative h-96 hidden lg:flex items-center justify-center">
                        <div class="absolute inset-0 hud-ring-2 animate-spin-slow"></div>
                        <div class="absolute inset-20 hud-ring animate-spin-reverse"></div>
                        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-neon/20 rounded-full animate-ping-slow"></div>
                        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-neon rounded-full shadow-[0_0_20px_#FF5E00]"></div>
                    </div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="w-2 h-2 bg-neon rounded-full animate-ping"></span>
                            <p class="text-neon text-xs font-bold tracking-[0.3em] uppercase">Voc√™ achou a melhor assit√™ncia de Floripa</p>
                        </div>
                        <h2 class="text-5xl md:text-7xl font-display font-black text-white mb-6 uppercase tracking-tighter drop-shadow-lg">
                            Manuten√ß√µes & <br>
                            <span class="text-transparent bg-clip-text bg-gradient-to-r from-neon via-white to-neon animate-pulse">Reparos Avan√ßados</span>
                        </h2>
                        <p class="max-w-xl text-gray-300 mb-10 text-sm md:text-lg leading-relaxed font-medium border-l-4 border-neon pl-6 backdrop-blur-sm bg-black/30 py-2 rounded-r">
                            Consertos de celulares e Notebook com profissionais especializados desde 1999, acess√≥rios, pe√ßas, servi√ßos de m√£o de obra com menor custo benef√≠cio, e ainda venda de celulares e Notebook usados, revisados e com garantia venha fazer seu or√ßamento sem compromisso!
                        </p>
                        <div class="flex flex-wrap gap-4">
                            <button onclick="switchTab('orcamento')" class="inline-flex items-center gap-3 bg-neon text-black font-black px-8 py-4 hover:bg-white transition-all uppercase text-sm rounded-sm shadow-[0_0_20px_rgba(255,94,0,0.4)] hover:shadow-[0_0_30px_rgba(255,255,255,0.6)] transform hover:-translate-y-1">
                                <i data-lucide="file-text" class="w-5 h-5"></i> Solicitar Or√ßamento
                            </button>
                            <a href="#location" onclick="switchTab('location')" class="inline-flex items-center gap-3 border border-gray-500 text-white font-bold px-8 py-4 hover:border-neon hover:text-neon hover:bg-neon/10 transition-all uppercase text-sm rounded-sm backdrop-blur-md">
                                <i data-lucide="map-pin" class="w-5 h-5"></i> Localiza√ß√£o
                            </a>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 relative z-10">
                    <div class="border border-border bg-panel p-6 hover:border-neon transition-colors rounded-lg shadow-lg group">
                        <div class="flex justify-between items-start mb-4"><i data-lucide="zap" class="text-neon w-6 h-6 group-hover:animate-pulse"></i><span class="text-xs text-gray-500 font-bold tracking-wider">VELOCIDADE</span></div>
                        <h3 class="text-white font-bold text-xl mb-1">Express 40min</h3><p class="text-xs text-gray-400">Trocas de tela e bateria em tempo recorde.</p>
                    </div>
                    <div class="border border-border bg-panel p-6 hover:border-neon transition-colors rounded-lg shadow-lg group">
                        <div class="flex justify-between items-start mb-4"><i data-lucide="shield-check" class="text-neon w-6 h-6 group-hover:animate-pulse"></i><span class="text-xs text-gray-500 font-bold tracking-wider">SEGURAN√áA</span></div>
                        <h3 class="text-white font-bold text-xl mb-1">Garantia Estendida</h3><p class="text-xs text-gray-400">90 dias de cobertura total em pe√ßas.</p>
                    </div>
                    <div class="border border-border bg-panel p-6 hover:border-neon transition-colors rounded-lg shadow-lg group">
                        <div class="flex justify-between items-start mb-4"><i data-lucide="calendar-clock" class="text-neon w-6 h-6 group-hover:animate-pulse"></i><span class="text-xs text-gray-500 font-bold tracking-wider">HIST√ìRIA</span></div>
                        <h3 class="text-white font-bold text-xl mb-1">+25 Anos</h3><p class="text-xs text-gray-400">Tradi√ß√£o e confian√ßa desde 1999 em Florian√≥polis.</p>
                    </div>
                </div>

                <div class="relative mt-8 border-2 border-dashed border-neon/30 bg-panel overflow-hidden hover:border-neon transition-all duration-500 group rounded-lg">
                    <div class="absolute top-0 right-0 bg-neon text-black text-[10px] font-bold px-4 py-1 font-display uppercase z-20 rounded-bl-lg">Academy Module</div>
                    <div class="grid grid-cols-1 lg:grid-cols-2">
                        <div class="p-8 flex flex-col justify-center relative z-10">
                            <div class="flex items-center gap-2 mb-4"><span class="w-2 h-2 bg-neon rounded-full animate-ping"></span><span class="text-neon text-xs font-bold tracking-widest uppercase">Inscri√ß√µes Abertas</span></div>
                            <h2 class="text-3xl md:text-4xl font-display font-bold text-white mb-4 uppercase leading-none">Curso T√©cnico de <br><span class="text-transparent bg-clip-text bg-gradient-to-r from-neon to-yellow-400">Manuten√ß√£o</span></h2>
                            <p class="text-gray-300 text-sm mb-6 leading-relaxed font-medium">Nosso curso te ensinar√° do b√°sico at√© reparos simples em placas utilizando <strong class="text-white">Micro-soldagem!</strong><br><br>Al√©m do conhecimento e experi√™ncia que voc√™ ir√° adquirir, voc√™ ainda garante um <strong class="text-neon">CERTIFICADO</strong> de conclus√£o.</p>
                            <a href="https://wa.me/554830252210?text=Ol%C3%A1%2C%20vim%20do%20site%20e%20quero%20saber%20mais%20sobre%20o%20Curso%20T%C3%A9cnico." target="_blank" class="mt-4 inline-flex w-fit items-center gap-3 bg-white text-black font-bold px-8 py-3 hover:bg-neon hover:text-white transition-all uppercase text-sm shadow-lg shadow-white/10 hover:shadow-neon/50 rounded-sm">Garantir Minha Vaga <i data-lucide="arrow-right" class="w-4 h-4"></i></a>
                        </div>
                        <div class="relative min-h-[300px] border-t lg:border-t-0 lg:border-l border-border bg-[#151515] overflow-hidden" id="carouselContainer">
                            <img src="fotos/jmicro.jpg" class="carousel-img absolute inset-0 w-full h-full object-cover active" alt="Microsc√≥pio">
                            <img src="fotos/lab.jpg" class="carousel-img absolute inset-0 w-full h-full object-cover" alt="Laborat√≥rio">
                            <img src="fotos/certificado.jpg" class="carousel-img absolute inset-0 w-full h-full object-cover" alt="Certificado">
                            <div class="absolute bottom-0 left-0 w-full h-1/3 bg-gradient-to-t from-panel to-transparent pointer-events-none"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. OR√áAMENTO -->
            <section id="orcamento" class="tab-content hidden space-y-6">
                <header class="flex items-center justify-between border-b border-border pb-4">
                    <div><h2 class="text-3xl font-display font-bold text-white uppercase">Solicitar Or√ßamento</h2><p class="text-xs text-neon font-bold tracking-wider">PREENCHA PARA ATENDIMENTO R√ÅPIDO</p></div><i data-lucide="file-text" class="w-10 h-10 text-gray-500"></i>
                </header>
                <div class="bg-panel border border-border p-6 md:p-10 rounded-lg shadow-2xl relative overflow-hidden">
                    <form id="orcamentoForm" class="relative z-10 max-w-3xl mx-auto space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="cyber-label">NOME COMPLETO</label><input type="text" id="nome" required class="cyber-input" placeholder="Seu nome"></div><div><label class="cyber-label">CPF (Opcional)</label><input type="text" id="cpf" class="cyber-input" placeholder="000.000.000-00"></div></div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="cyber-label">TELEFONE (WhatsApp)</label><input type="tel" id="telefone" required class="cyber-input" placeholder="(48) 99999-9999"></div><div><label class="cyber-label">TIPO DE APARELHO</label><select id="tipo" class="cyber-input bg-[#0a0a0a]"><option value="Celular">Celular</option><option value="Notebook">Notebook</option><option value="Tablet">Tablet/iPad</option><option value="Outro">Outro</option></select></div></div>
                        <div><label class="cyber-label">MARCA E MODELO</label><input type="text" id="modelo" required class="cyber-input" placeholder="Ex: iPhone 11, Samsung S20..."></div>
                        <div><label class="cyber-label">DEFEITO / PROBLEMA</label><textarea id="defeito" required rows="4" class="cyber-input" placeholder="Descreva o que est√° acontecendo..."></textarea></div>
                        <button type="submit" id="btnEnviar" class="w-full bg-neon text-black font-black py-4 uppercase tracking-widest hover:bg-white transition-colors shadow-[0_0_20px_rgba(255,94,0,0.4)] flex justify-center items-center gap-2"><span id="btnText">ENVIAR SOLICITA√á√ÉO</span><i data-lucide="send" class="w-4 h-4"></i></button>
                    </form>
                    <div id="successMessage" class="hidden absolute inset-0 bg-panel z-20 flex flex-col items-center justify-center text-center p-8 animate-fade-in"><div class="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mb-6"><i data-lucide="check" class="w-10 h-10 text-green-500"></i></div><h3 class="text-3xl font-display font-bold text-white mb-2">SOLICITA√á√ÉO ENVIADA!</h3><p class="text-gray-400 max-w-md">Recebemos seus dados com sucesso.</p><p class="text-neon font-bold text-lg mt-4 animate-pulse">Voc√™ ser√° respondido em at√© 20 minutos.</p><button onclick="resetForm()" class="mt-8 text-xs text-gray-500 underline hover:text-white">Enviar outro or√ßamento</button></div>
                </div>
                <div class="h-24 md:hidden"></div>
            </section>

            <!-- 3. CELULARES -->
            <section id="celular" class="tab-content hidden space-y-6">
                <header class="flex items-center justify-between border-b border-border pb-4">
                    <div><h2 class="text-3xl font-display font-bold text-white uppercase">Manuten√ß√£o Celular</h2><p class="text-xs text-neon font-bold tracking-wider">IPHONE & ANDROID (TODAS AS MARCAS)</p></div><i data-lucide="smartphone" class="w-10 h-10 text-gray-500"></i>
                </header>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="group relative bg-panel border border-border overflow-hidden h-56 rounded-lg shadow-md transition-all hover:border-neon"><img src="fotos/telacelular.png" class="absolute inset-0 w-full h-full object-cover object-center opacity-80 group-hover:scale-110 transition-transform duration-700"><div class="absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent p-5 flex flex-col justify-end"><i data-lucide="layers" class="w-8 h-8 text-neon mb-2"></i><h3 class="text-white font-bold uppercase text-lg">Troca de Tela</h3><p class="text-xs text-gray-300 mb-3 line-clamp-2">Substitui√ß√£o de vidros e displays. Qualidade original.</p></div></div>
                    <div class="group relative bg-panel border border-border overflow-hidden h-56 rounded-lg shadow-md transition-all hover:border-neon"><img src="fotos/bateriacelular.png" class="absolute inset-0 w-full h-full object-cover object-center opacity-80 group-hover:scale-110 transition-transform duration-700"><div class="absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent p-5 flex flex-col justify-end"><i data-lucide="battery-charging" class="w-8 h-8 text-neon mb-2"></i><h3 class="text-white font-bold uppercase text-lg">Troca de Bateria</h3><p class="text-xs text-gray-300 mb-3 line-clamp-2">Revitalize seu aparelho com baterias 100% sa√∫de.</p></div></div>
                    <div class="group relative bg-panel border border-border overflow-hidden h-56 rounded-lg shadow-md transition-all hover:border-neon"><div class="absolute top-0 right-0 bg-neon text-black text-[9px] font-bold px-2 py-1 z-10">ESPECIALIDADE</div><img src="fotos/placacelular.png" class="absolute inset-0 w-full h-full object-cover object-center opacity-80 group-hover:scale-110 transition-transform duration-700"><div class="absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent p-5 flex flex-col justify-end"><i data-lucide="cpu" class="w-8 h-8 text-neon mb-2"></i><h3 class="text-white font-bold uppercase text-lg">Reparo Avan√ßado</h3><p class="text-xs text-gray-300 mb-3 line-clamp-2">Microsoldagem para aparelhos mortos ou com curto.</p></div></div>
                </div>
                <div class="h-24 md:hidden"></div>
            </section>

            <!-- 4. NOTEBOOKS -->
            <section id="notebook" class="tab-content hidden space-y-6">
                <header class="flex items-center justify-between border-b border-border pb-4">
                    <div><h2 class="text-3xl font-display font-bold text-white uppercase">Manuten√ß√£o Notebook</h2><p class="text-xs text-neon font-bold tracking-wider">TODOS OS MODELOS</p></div><i data-lucide="monitor" class="w-10 h-10 text-gray-500"></i>
                </header>
                <div class="h-24 md:hidden"></div>
            </section>

            <!-- 5. VENDAS -->
            <section id="vendas" class="tab-content hidden space-y-6">
                <header class="flex items-center justify-between border-b border-border pb-4">
                    <div><h2 class="text-3xl font-display font-bold text-white uppercase">Vendas</h2><p class="text-xs text-neon font-bold tracking-wider">CELULARES E NOTEBOOKS USADOS</p></div><i data-lucide="shopping-cart" class="w-10 h-10 text-gray-500"></i>
                </header>
                <div class="h-24 md:hidden"></div>
            </section>

            <!-- 6. LOCALIZA√á√ÉO -->
            <section id="location" class="tab-content hidden space-y-6">
                <header class="flex items-center justify-between border-b border-border pb-4">
                    <div><h2 class="text-3xl font-display font-bold text-white uppercase">Localiza√ß√£o</h2><p class="text-xs text-neon font-bold tracking-wider">ENCONTRE NOSSA LOJA</p></div><i data-lucide="map" class="w-10 h-10 text-gray-500"></i>
                </header>
                <div class="flex flex-wrap gap-2 mb-6">
                    <button id="btn-office" onclick="switchLoc('office')" class="loc-btn active">Loja Principal</button>
                    <button id="btn-box94" onclick="switchLoc('box94')" class="loc-btn">Box 94</button>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div id="info-office" class="bg-panel border border-border p-6 rounded-lg">
                        <h3 class="text-neon font-bold text-lg mb-4">Loja Principal</h3>
                        <p class="text-gray-300 mb-2"><strong>Endere√ßo:</strong> Rua Exemplo, 123 - Florian√≥polis</p>
                        <p class="text-gray-300 mb-2"><strong>Telefone:</strong> (48) 3025-2210</p>
                        <p class="text-gray-300"><strong>Hor√°rio:</strong> Seg-Sex 9h-18h | Sab 9h-13h</p>
                    </div>
                    <div id="info-box94" class="hidden bg-panel border border-border p-6 rounded-lg">
                        <h3 class="text-neon font-bold text-lg mb-4">Box 94</h3>
                        <p class="text-gray-300 mb-2"><strong>Endere√ßo:</strong> Camel√≥dromo Municipal, Box 94</p>
                        <p class="text-gray-300 mb-2"><strong>Telefone:</strong> (48) 3025-2210</p>
                        <p class="text-gray-300"><strong>Hor√°rio:</strong> Seg-Sex 9h-18h | Sab 9h-13h</p>
                    </div>
                    <iframe id="map-office" class="w-full h-full min-h-[300px] rounded-lg col-span-1 lg:col-span-2" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3536.343769053987!2d-48.55187492451662!3d-27.59265337624864!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95273826468650b9%3A0x55b6135352839736!2sCamel%C3%B3dromo%20Municipal%20de%20Florian%C3%B3polis!5e0!3m2!1spt-BR!2sbr!4v1708455000000" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                    <iframe id="map-box94" class="hidden w-full h-full min-h-[300px] rounded-lg col-span-1 lg:col-span-2" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3536.343769053987!2d-48.55187492451662!3d-27.59265337624864!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95273826468650b9%3A0x55b6135352839736!2sCamel%C3%B3dromo%20Municipal%20de%20Florian%C3%B3polis!5e0!3m2!1spt-BR!2sbr!4v1708455000000" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
                
                <div class="h-40 md:hidden"></div>
            </section>

        </div>
    </main>

    <script type="module">
      const supabaseUrl = 'https://rgkxplbvlermpfvvhxqq.supabase.co';
      const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJna3hwbGJ2bGVybXBmdnZoeHFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNzE1MDMsImV4cCI6MjA4Mzk0NzUwM30.-QjYsddysonxd5Wa0KUGe7hl59Vkg1-TjFwbe6wYo4s';
      
      const { createClient } = window.supabase;
      const supabase = createClient(supabaseUrl, supabaseKey);

      // 1. CONTADOR DE VISITAS REAL
      async function updateVisitorCounter() {
          const counterEl = document.getElementById('visit-counter-desktop');
          
          try {
              let { data: stats, error } = await supabase
                  .from('site_stats')
                  .select('visitors')
                  .eq('id', 1)
                  .single();

              if (error && error.code === 'PGRST116') {
                  await supabase.from('site_stats').insert([{ id: 1, visitors: 24500 }]);
                  stats = { visitors: 24500 };
              }

              if (!sessionStorage.getItem('visited')) {
                  const newCount = (stats?.visitors || 24500) + 1;
                  await supabase
                      .from('site_stats')
                      .update({ visitors: newCount })
                      .eq('id', 1);
                  
                  sessionStorage.setItem('visited', 'true');
                  if(counterEl) counterEl.innerText = newCount.toLocaleString('pt-BR', { minimumIntegerDigits: 5, useGrouping: true }).replace(',','.');
              } else {
                  if(counterEl) counterEl.innerText = (stats?.visitors || 24500).toLocaleString('pt-BR', { minimumIntegerDigits: 5, useGrouping: true }).replace(',','.');
              }

          } catch (err) {
              console.error("Erro contador:", err);
              if(counterEl) counterEl.innerText = "24.500"; 
          }
      }

      updateVisitorCounter();

      // 2. OR√áAMENTO LOGIC - INTEGRADO COM SUPABASE E NTFY.SH
      const form = document.getElementById('orcamentoForm');
      const btnEnviar = document.getElementById('btnEnviar');
      const btnText = document.getElementById('btnText');
      const successMessage = document.getElementById('successMessage');

      window.resetForm = function() {
          form.reset();
          successMessage.classList.add('hidden');
          form.classList.remove('hidden');
      }

      if(form) {
          form.addEventListener('submit', async (e) => {
              e.preventDefault();
              
              btnEnviar.disabled = true;
              btnText.innerText = 'ENVIANDO DADOS...';

              const data = {
                  nome: document.getElementById('nome').value,
                  cpf: document.getElementById('cpf').value || null,
                  telefone: document.getElementById('telefone').value,
                  tipo_aparelho: document.getElementById('tipo').value,
                  marca_modelo: document.getElementById('modelo').value,
                  defeito: document.getElementById('defeito').value,
                  created_at: new Date().toISOString()
              };

              try {
                  // Inserir no Supabase
                  const { error: dbError } = await supabase.from('orcamentos').insert([data]);
                  if (dbError) throw new Error(`Erro Supabase: ${dbError.message}`);

                  // Enviar notifica√ß√£o para ntfy.sh
                  const notificationText = `üöÄ NOVO OR√áAMENTO\n\n` +
                      `üë§ Cliente: ${data.nome}\n` +
                      `üì± Aparelho: ${data.tipo_aparelho}\n` +
                      `üîß Modelo: ${data.marca_modelo}\n` +
                      `‚ö†Ô∏è Defeito: ${data.defeito}\n` +
                      `‚òéÔ∏è Telefone: ${data.telefone}\n` +
                      `${data.cpf ? `üìã CPF: ${data.cpf}\n` : ''}` +
                      `‚è∞ Data: ${new Date().toLocaleString('pt-BR')}`;

                  const ntfyResponse = await fetch('https://ntfy.sh/PhoneParts_leads', {
                      method: 'POST',
                      body: notificationText,
                      headers: { 
                          'Title': 'üöÄ Nova Solicita√ß√£o - Phone Parts',
                          'Priority': 'high',
                          'Tags': 'iphone,moneybag,alert'
                      }
                  });

                  if (!ntfyResponse.ok) {
                      console.warn('Aviso: Notifica√ß√£o ntfy.sh n√£o foi enviada, mas dados foram salvos.');
                  }

                  // Mostrar mensagem de sucesso
                  form.classList.add('hidden');
                  successMessage.classList.remove('hidden');

              } catch (error) {
                  console.error('Erro:', error);
                  alert('Erro ao enviar or√ßamento. Por favor, tente novamente ou entre em contato via WhatsApp: (48) 3025-2210');
              } finally {
                  btnEnviar.disabled = false;
                  btnText.innerText = 'ENVIAR SOLICITA√á√ÉO';
              }
          });
      }
    </script>

    <script>
        lucide.createIcons();

        function switchTab(tabId) {
            const mainContainer = document.getElementById('mainDisplay');
            mainContainer.classList.add('cyber-transition');
            setTimeout(() => {
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                    const icon = btn.querySelector('i');
                    if(icon) icon.classList.remove('text-neon');
                });
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                const buttons = document.querySelectorAll(`button[onclick="switchTab('${tabId}')"]`);
                buttons.forEach(btn => {
                     btn.classList.add('active');
                     const icon = btn.querySelector('i');
                     if(icon) icon.classList.add('text-neon');
                });
                const selectedContent = document.getElementById(tabId);
                if(selectedContent) selectedContent.classList.remove('hidden');
                if (tabId === 'home') initCircuitCanvas();
                setTimeout(() => mainContainer.classList.remove('cyber-transition'), 100);
            }, 150);
        }

        function switchLoc(locId) {
            document.querySelectorAll('.loc-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + locId).classList.add('active');
            document.getElementById('info-office').classList.add('hidden');
            document.getElementById('info-box94').classList.add('hidden');
            document.getElementById('info-' + locId).classList.remove('hidden');
            document.getElementById('map-office').classList.add('hidden');
            document.getElementById('map-box94').classList.add('hidden');
            document.getElementById('map-' + locId).classList.remove('hidden');
        }

        window.onload = function() {
            initCircuitCanvas();
            const images = document.querySelectorAll('.carousel-img');
            let currentIndex = 0;
            if(images.length > 0) {
                setInterval(() => {
                    images[currentIndex].classList.remove('active');
                    currentIndex = (currentIndex + 1) % images.length;
                    images[currentIndex].classList.add('active');
                }, 4000);
            }
        }

        function initCircuitCanvas() {
            const canvas = document.getElementById('circuitCanvas');
            if(!canvas) return;
            const ctx = canvas.getContext('2d');
            let width = canvas.width = canvas.parentElement.offsetWidth;
            let height = canvas.height = canvas.parentElement.offsetHeight;
            const points = [];
            for(let i = 0; i < 15; i++) {
                points.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5
                });
            }
            function draw() {
                ctx.fillStyle = 'rgba(10, 10, 10, 0.1)';
                ctx.fillRect(0, 0, width, height);
                ctx.strokeStyle = 'rgba(255, 94, 0, 0.1)';
                ctx.lineWidth = 1;
                points.forEach((p, i) => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if(p.x < 0 || p.x > width) p.vx *= -1;
                    if(p.y < 0 || p.y > height) p.vy *= -1;
                    ctx.fillStyle = 'rgba(255, 94, 0, 0.2)';
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
                    ctx.fill();
                    points.forEach((p2, j) => {
                        if(i < j) {
                            const dx = p.x - p2.x;
                            const dy = p.y - p2.y;
                            const dist = Math.sqrt(dx*dx + dy*dy);
                            if(dist < 150) {
                                ctx.beginPath();
                                ctx.moveTo(p.x, p.y);
                                ctx.lineTo(p2.x, p2.y);
                                ctx.stroke();
                            }
                        }
                    });
                });
                requestAnimationFrame(draw);
            }
            draw();
        }
    </script>
</body>
</html>
